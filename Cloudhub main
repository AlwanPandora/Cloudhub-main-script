local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

--> Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = playerGui
screenGui.Name = "MainGUI"
screenGui.ResetOnSpawn = false

--> Create Toggle Button
local toggleButton = Instance.new("ImageButton")
toggleButton.Parent = screenGui
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0.1, 0, 0.1, 0)
toggleButton.Position = UDim2.new(0.5, 0, 1, 0) -- Start off-screen at the bottom
toggleButton.AnchorPoint = Vector2.new(0.5, 0.5)
toggleButton.Image = "rbxassetid://114669344245552" -- Replace with your image ID
toggleButton.BackgroundTransparency = 1
toggleButton.ZIndex = 2

--> Create Menu Frame
local menuFrame = Instance.new("Frame")
menuFrame.Parent = screenGui
menuFrame.Name = "MenuFrame"
menuFrame.Size = UDim2.new(0.3, 0, 0.5, 0)
menuFrame.Position = UDim2.new(0.5, 0, 1, 0) -- Start off-screen at the bottom
menuFrame.AnchorPoint = Vector2.new(0.5, 0.5)
menuFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
menuFrame.ZIndex = 1

--> Add a UICorner to the Menu Frame
local uiCorner = Instance.new("UICorner")
uiCorner.Parent = menuFrame
uiCorner.CornerRadius = UDim.new(0.1, 0)

--> Create Blur Effect
local blur = Instance.new("BlurEffect")
blur.Name = "MenuBlur"
blur.Size = 0
blur.Parent = Lighting

--> Tween Variables
local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
local isMenuOpen = false

--> Tween the Button and Menu
local function toggleMenu()
    if isMenuOpen then
        --> Close Menu
        TweenService:Create(toggleButton, tweenInfo, { Position = UDim2.new(0.5, 0, 1, 0) }):Play()
        TweenService:Create(menuFrame, tweenInfo, { Position = UDim2.new(0.5, 0, 1, 0) }):Play()
        TweenService:Create(blur, tweenInfo, { Size = 0 }):Play()
    else
        --> Open Menu
        TweenService:Create(toggleButton, tweenInfo, { Position = UDim2.new(0.5, 0, 0.9, 0) }):Play()
        TweenService:Create(menuFrame, tweenInfo, { Position = UDim2.new(0.5, 0, 0.5, 0) }):Play()
        TweenService:Create(blur, tweenInfo, { Size = 24 }):Play()
    end
    isMenuOpen = not isMenuOpen
end

--> Connect Toggle Button Click Event
toggleButton.MouseButton1Click:Connect(function()
    --> Load and execute the external script
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/AlwanPandora/CloudHub-Script/refs/heads/main/Cloudhub.lua", true))()
    end)

    if not success then
        warn("Failed to load external script: " .. err)
    else
        --> Optionally, close the menu after loading the script
        toggleMenu()
    end
end)

--> Initial Button Slide-Up Animation
TweenService:Create(toggleButton, tweenInfo, { Position = UDim2.new(0.5, 0, 0.9, 0) }):Play()
